// Generated by CoffeeScript 1.6.3
var api, app, config, express, heroku, index, route, _i, _len, _ref;

api = require('./api');

index = require('./index');

express = require('express');

heroku = process.env.heroku;

config = {
  port: process.env.PORT || 5000,
  "static": ['css', 'js', 'img'],
  host: heroku ? 'contributor.io' : 'localhost',
  subdomains: {
    api: 'api.',
    index: heroku ? 'www.' : ''
  }
};

app = express();

app.use(express.vhost("" + config.subdomains.index + config.host, index.app));

app.use(express.vhost("" + config.subdomains.api + config.host, api.app));

_ref = config["static"];
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  route = _ref[_i];
  app.use("/" + route, express["static"]("" + __dirname + "/" + route));
}

app.listen(config.port);
